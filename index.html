<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado de Enfermagem 8° Período - Urgência e Emergência</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .option-button {
            transition: all 0.2s ease-in-out;
        }
        .option-button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .correct-answer {
            background-color: #dcfce7 !important; /* green-100 */
            border-color: #22c55e !important; /* green-500 */
            color: #15803d; /* green-800 */
        }
        .wrong-answer {
            background-color: #fee2e2 !important; /* red-100 */
            border-color: #ef4444 !important; /* red-500 */
            color: #b91c1c; /* red-800 */
        }
        .selected-wrong {
             background-color: #fee2e2 !important; /* red-100 */
            border-color: #ef4444 !important; /* red-500 */
            color: #b91c1c; /* red-800 */
            opacity: 0.8;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col min-h-screen">
    <div class="flex-grow flex items-center justify-center p-4">
        <div id="quiz-container" class="w-full max-w-3xl bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
            <h1 class="text-2xl sm:text-3xl font-bold text-center text-gray-700 mb-2">Simulado de Urgência e Emergência</h1>
            <h2 class="text-lg text-center text-gray-500 mb-4">Baseado no material de Queimaduras, Trauma e Emergências Clínicas</h2>
            <p id="progress-indicator" class="text-center text-gray-500 mb-6 font-medium">Questão 1 de 55</p>
            
            <div id="question-area">
                <p id="question-text" class="text-lg text-gray-800 mb-6 min-h-[60px]"></p>
                <div id="options-container" class="grid grid-cols-1 gap-4">
                    <!-- Options will be dynamically inserted here -->
                </div>
            </div>

            <div id="feedback-area" class="mt-6 hidden">
                <h3 class="font-bold text-lg mb-2 text-gray-700">Justificativa:</h3>
                <p id="justification-text" class="text-gray-600 bg-gray-50 p-4 rounded-lg border border-gray-200"></p>
            </div>

            <div class="flex justify-between items-center mt-8">
                <button id="prev-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-6 rounded-lg hover:bg-gray-300 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">Voltar</button>
                <button id="next-btn" class="bg-blue-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">Avançar</button>
            </div>
        </div>

        <div id="result-container" class="hidden w-full max-w-3xl bg-white p-8 rounded-2xl shadow-lg text-center">
            <h1 class="text-3xl font-bold text-gray-700 mb-4">Simulado Finalizado!</h1>
            <p class="text-xl text-gray-600 mb-6">Seu resultado final é:</p>
            <div id="score-circle" class="relative w-40 h-40 mx-auto mb-6 flex items-center justify-center bg-blue-100 rounded-full">
                <span id="final-score" class="text-4xl font-bold text-blue-700"></span>
            </div>
            <p id="score-details" class="text-lg text-gray-600 mb-8"></p>
            <button id="restart-btn" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-blue-700 transition duration-200">Refazer Simulado</button>
        </div>
    </div>

    <footer class="text-center py-4 text-gray-500 text-sm">
        <p>&copy; todos os direitos reservados a gabriel angelino</p>
    </footer>

    <script>
        const questions = [
            // Queimaduras - Anatomia e Fisiopatologia
            {
                question: "Na anatomia da pele, qual camada é a mais superficial e fina, cuja lesão isolada caracteriza a queimadura de 1º grau?",
                options: ["Derme", "Epiderme", "Hipoderme", "Tecido muscular"],
                correctAnswer: 1,
                justification: "A epiderme é a camada mais superficial e fina da pele. Seu comprometimento isolado define a queimadura de 1º grau."
            },
            {
                question: "O processo de lesão térmica nas proteínas da pele é comparado no texto a qual fenômeno?",
                options: ["Derreter gelo", "Fritar um ovo (desnaturação proteica)", "Evaporação da água", "Congelamento rápido"],
                correctAnswer: 1,
                justification: "O material compara a queimadura a 'fritar um ovo', explicando que a temperatura elevada causa desnaturação grave das proteínas da pele."
            },
            
            // Queimaduras - Classificação e Profundidade
            {
                question: "Qual a característica clínica típica de uma queimadura de 2º grau?",
                options: ["Pele seca e carbonizada", "Apenas vermelhidão e dor", "Formação de bolhas (flictenas) e base úmida/brilhante", "Ausência total de dor"],
                correctAnswer: 2,
                justification: "Queimaduras de 2º grau envolvem epiderme e derme, caracterizando-se por bolhas, aparência brilhante ou base úmida e dor intensa."
            },
            {
                question: "Como se apresenta clinicamente uma queimadura de 3º grau?",
                options: ["Eritema doloroso", "Flictenas e muita dor", "Espessa, seca, esbranquiçada ou com aparência de couro", "Apenas descamação"],
                correctAnswer: 2,
                justification: "A queimadura de 3º grau causa dano completo da derme e epiderme, apresentando-se seca, esbranquiçada, com aparência de couro e geralmente indolor."
            },
            {
                question: "Queimaduras de 4º grau se diferenciam por acometer:",
                options: ["Apenas a epiderme", "Até a derme profunda", "Tecidos subjacentes como músculos, ossos e órgãos internos", "Apenas folículos pilosos"],
                correctAnswer: 2,
                justification: "O 4º grau envolve não apenas todas as camadas da pele, mas também tecido subjacente, músculos, ossos e órgãos internos."
            },

            // Queimaduras - Regra dos Nove
            {
                question: "Pela 'Regra dos Nove' para adultos, qual a porcentagem de superfície corporal correspondente a um membro superior (braço inteiro)?",
                options: ["4,5%", "9%", "18%", "1%"],
                correctAnswer: 1,
                justification: "No adulto, cada membro superior corresponde a 9% da superfície corporal total."
            },
            {
                question: "Na 'Regra dos Nove' para adultos, o tronco anterior corresponde a:",
                options: ["9%", "18%", "36%", "1%"],
                correctAnswer: 1,
                justification: "O tronco anterior no adulto corresponde a 18% da superfície corporal total."
            },
            {
                question: "Para crianças/bebês, qual a porcentagem atribuída à cabeça na 'Regra dos Nove' modificada?",
                options: ["9%", "14%", "18%", "21%"],
                correctAnswer: 2,
                justification: "Em crianças e bebês, a cabeça corresponde a 18% da superfície corporal, refletindo a proporção corporal diferente dos adultos."
            },
            {
                question: "Na 'Regra dos Nove' para adultos, a região genital corresponde a:",
                options: ["1%", "5%", "9%", "0,5%"],
                correctAnswer: 0,
                justification: "A região genital (períneo) corresponde a 1% da superfície corporal no adulto."
            },

            // Queimaduras - Classificação de Gravidade
            {
                question: "Um paciente adulto com queimadura de 2º grau em 15% da superfície corporal é classificado como:",
                options: ["Pequeno queimado (leve)", "Médio queimado (moderado)", "Grande queimado (grave)", "Não é considerado queimado"],
                correctAnswer: 1,
                justification: "Médio queimado adulto é aquele com queimadura de 2º grau entre 10% e 20% da superfície corporal."
            },
            {
                question: "Qual das seguintes situações classifica automaticamente um paciente como 'Grande Queimado'?",
                options: ["Queimadura de 1º grau em 50% do corpo", "Queimadura de 2º grau em 5% do corpo", "Lesão por inalação ou queimadura elétrica", "Queimadura solar extensa"],
                correctAnswer: 2,
                justification: "Lesões elétricas, químicas, por inalação, ou envolvendo áreas nobres (face, mãos, genitália) classificam o paciente como Grande Queimado, independentemente da extensão."
            },

            // Queimaduras - Tratamento e Parkland
            {
                question: "Qual é a Fórmula de Parkland correta para reposição volêmica nas primeiras 24 horas?",
                options: ["2 ml x Peso x %SCQ", "4 ml x Peso x %SCQ (Ringer Lactato)", "10 ml x Peso", "100 ml x %SCQ"],
                correctAnswer: 1,
                justification: "A fórmula de Parkland recomendada é 4 ml de Ringer Lactato x Peso (kg) x % de superfície corporal queimada."
            },
            {
                question: "Como deve ser administrado o volume calculado pela fórmula de Parkland nas primeiras 24 horas?",
                options: ["Todo o volume nas primeiras 4 horas", "50% nas primeiras 8 horas e 50% nas 16 horas seguintes", "Volumes iguais a cada hora", "1/3 a cada 8 horas"],
                correctAnswer: 1,
                justification: "Metade (1/2) do volume total deve ser administrada nas primeiras 8 horas e o restante nas 16 horas seguintes."
            },
            {
                question: "Qual a diurese alvo para um paciente adulto com queimadura térmica?",
                options: ["10-20 ml/h", "30-50 ml/h", "100 ml/h", "1 ml/kg/h"],
                correctAnswer: 1,
                justification: "Para queimaduras térmicas em adultos, a meta de débito urinário é de 30 a 50 ml/h."
            },
            {
                question: "Em casos de queimadura elétrica, qual a meta de diurese no adulto para prevenir lesão renal por mioglobina?",
                options: ["30-50 ml/h", "50-70 ml/h", "100 ml/h", "200 ml/h"],
                correctAnswer: 2,
                justification: "Em queimaduras elétricas, deve-se aumentar a oferta de líquidos para garantir uma diurese de 100 ml/h no adulto, visando clarear a mioglobinúria."
            },
            
            // Queimaduras - Tipos Específicos e Cuidados
            {
                question: "Qual a principal complicação sistêmica associada à queimadura elétrica de alta voltagem devido à destruição muscular?",
                options: ["Hipocalemia", "Liberação de mioglobina e potássio (risco de IRA e arritmias)", "Alcalose respiratória", "Hiperglicemia severa"],
                correctAnswer: 1,
                justification: "A destruição muscular libera mioglobina (tóxica para os rins) e potássio (risco de arritmias cardíacas)."
            },
            {
                question: "Quais são sinais de lesão pulmonar por inalação de fumaça?",
                options: ["Poliúria e hipertensão", "Pelos nasais chamuscados, rouquidão, escarro com fuligem", "Dor abdominal", "Cefaleia apenas"],
                correctAnswer: 1,
                justification: "Indicadores de lesão por inalação incluem queimadura de face, pelos nasais chamuscados, rouquidão, estridor e escarro carbonáceo."
            },
            {
                question: "O que é a escarotomia?",
                options: ["Retirada de pele para enxerto", "Incisão na escara para aliviar constrição e permitir ventilação/circulação", "Limpeza da ferida com escova", "Aplicação de creme antibiótico"],
                correctAnswer: 1,
                justification: "Escarotomia é a incisão realizada na pele queimada (escara) em queimaduras circunferenciais para aliviar a pressão do edema e permitir a expansão torácica ou circulação do membro."
            },
            {
                question: "Sobre os curativos em queimados, qual a recomendação do material?",
                options: ["Usar xylocaína gel para dor", "Usar curativo oclusivo e agentes como Sulfadiazina de Prata", "Deixar exposto ao ar", "Usar pasta de dente"],
                correctAnswer: 1,
                justification: "Recomenda-se curativo oclusivo para diminuir dor e contaminação, utilizando agentes antibacterianos como a Sulfadiazina de Prata. Xylocaína e furacin não são recomendados."
            },
            {
                question: "Qual é a técnica de enfaixamento recomendada para membros queimados?",
                options: ["Circular apertado", "Espiral contínua", "Escama de peixe (indo e voltando, sem dar voltas completas)", "Nenhuma, deixar aberto"],
                correctAnswer: 2,
                justification: "A técnica recomendada é em 'escama de peixe' (indo e voltando), evitando enfaixar girando (circular) para não causar constrição com o edema."
            },

            // Intoxicação
            {
                question: "Quais são as fases da intoxicação descritas?",
                options: ["Ingestão e Digestão", "Exposição, Toxicocinética, Toxicodinâmica e Clínica", "Absorção e Excreção apenas", "Aguda e Crônica"],
                correctAnswer: 1,
                justification: "As fases descritas são: Exposição, Toxicocinética (transporte), Toxicodinâmica (ação) e Clínica (sinais e sintomas)."
            },
            {
                question: "No atendimento inicial ao intoxicado, qual a prioridade?",
                options: ["Identificar o veneno", "Garantir a segurança da cena e do socorrista", "Administrar carvão ativado", "Provocar vômito"],
                correctAnswer: 1,
                justification: "A segurança da cena é a prioridade para evitar que o socorrista também se torne uma vítima. Em seguida, o ABCDE."
            },
            {
                question: "Qual substância é citada como asfixiante químico comum em incêndios (além do CO)?",
                options: ["Gás cloro", "Cianeto", "Amônia", "Nitrogênio"],
                correctAnswer: 1,
                justification: "O cianeto é um subproduto da combustão de plásticos e é um asfixiante químico que impede as células de usar oxigênio."
            },
            {
                question: "Qual o mecanismo da intoxicação por Monóxido de Carbono (CO)?",
                options: ["Irritação direta da via aérea", "Ligação à hemoglobina com afinidade muito maior que o O2, causando hipóxia", "Paralisia muscular", "Edema pulmonar imediato"],
                correctAnswer: 1,
                justification: "O CO se liga à hemoglobina (formando carboxihemoglobina) com afinidade 200-250 vezes maior que o oxigênio, impedindo o transporte de O2."
            },

            // Edema Agudo de Pulmão (EAP)
            {
                question: "O que caracteriza o Edema Agudo de Pulmão (EAP)?",
                options: ["Acúmulo de ar na pleura", "Acúmulo súbito e anormal de líquido nos espaços extravasculares (interstício e alvéolos) do pulmão", "Infecção bacteriana crônica", "Obstrução da traqueia"],
                correctAnswer: 1,
                justification: "EAP é o acúmulo anormal de líquido nos pulmões, interferindo nas trocas gasosas."
            },
            {
                question: "Qual a diferença principal entre EAP cardiogênico e não cardiogênico?",
                options: ["Não há diferença", "Cardiogênico é por aumento da pressão hidrostática; Não cardiogênico é por aumento da permeabilidade vascular", "Cardiogênico é viral; Não cardiogênico é bacteriano", "Cardiogênico tem menos proteína"],
                correctAnswer: 1,
                justification: "O cardiogênico ocorre por aumento da pressão capilar pulmonar (hidrostática). O não cardiogênico ocorre por lesão da membrana e aumento da permeabilidade."
            },
            {
                question: "Qual sinal clínico extremo sugere EAP grave?",
                options: ["Tosse seca", "Secreção rósea espumosa saindo por boca e nariz", "Dor no ombro", "Febre alta"],
                correctAnswer: 1,
                justification: "A secreção rósea e espumosa indica inundação alveolar e é um sinal clássico de gravidade no EAP."
            },
            {
                question: "Qual a posição recomendada para o paciente com EAP?",
                options: ["Deitado (supina)", "Trendelenburg", "Sentado, preferencialmente com pernas pendentes", "Decúbito lateral"],
                correctAnswer: 2,
                justification: "A posição sentada com pernas pendentes reduz o retorno venoso (pré-carga) e facilita a respiração."
            },
            {
                question: "Qual a função da Furosemida no tratamento do EAP?",
                options: ["Aumentar a pressão arterial", "Diurético de alça com efeito venodilatador imediato", "Broncodilatador", "Sedativo"],
                correctAnswer: 1,
                justification: "A furosemida causa venodilatação imediata (reduzindo pré-carga) e, posteriormente, diurese."
            },
            {
                question: "Qual a função da Morfina no EAP (quando indicada)?",
                options: ["Aumentar a frequência cardíaca", "Reduzir ansiedade e pré-carga (venodilatação)", "Aumentar a contratilidade", "Reverter broncoespasmo"],
                correctAnswer: 1,
                justification: "A morfina reduz a ansiedade e promove venodilatação, diminuindo o retorno venoso."
            },
            {
                question: "A Nitroglicerina é usada no EAP principalmente por sua ação:",
                options: ["Diurética", "Vasodilatadora venosa e coronariana (reduz pré-carga)", "Inotrópica positiva", "Antiarrítmica"],
                correctAnswer: 1,
                justification: "A nitroglicerina é um potente venodilatador, reduzindo a pré-carga e melhorando o fluxo coronariano."
            },

            // Trauma Cranioencefálico (TCE)
            {
                question: "O que define uma concussão cerebral?",
                options: ["Sangramento visível na TC", "Perda imediata e transitória da consciência sem lesão estrutural macroscópica", "Fratura com afundamento", "Coma prolongado"],
                correctAnswer: 1,
                justification: "Concussão é uma perda transitória da consciência e função, sem alterações estruturais visíveis na tomografia."
            },
            {
                question: "O hematoma epidural (extradural) é frequentemente causado por ruptura de:",
                options: ["Veias ponte", "Artéria meníngea média", "Seios venosos", "Artéria basilar"],
                correctAnswer: 1,
                justification: "O hematoma epidural geralmente resulta de fratura temporal que lacera a artéria meníngea média."
            },
            {
                question: "O 'intervalo lúcido' é classicamente associado a qual tipo de hematoma?",
                options: ["Subdural agudo", "Epidural", "Subaracnoideo", "Intraparenquimatoso"],
                correctAnswer: 1,
                justification: "O intervalo lúcido (perda de consciência, melhora temporária, seguida de piora) é clássico do hematoma epidural."
            },
            {
                question: "Sinais de fratura de base de crânio incluem:",
                options: ["Midríase bilateral", "Sinal de Battle e olhos de guaxinim (equimose periorbitária)", "Hemiplegia", "Hipertensão"],
                correctAnswer: 1,
                justification: "Equimose retroauricular (Battle) e periorbitária (guaxinim), além de otoliquorreia/rinoliquorreia, indicam fratura de base de crânio."
            },
            {
                question: "O que compõe a Tríade de Cushing (sinal de hipertensão intracraniana)?",
                options: ["Hipotensão, taquicardia, taquipneia", "Hipertensão, bradicardia, alteração respiratória", "Hipertensão, taquicardia, febre", "Hipotensão, bradicardia, hipotermia"],
                correctAnswer: 1,
                justification: "A tríade é: Hipertensão arterial (com pressão de pulso alargada), Bradicardia e Respiração irregular."
            },
            {
                question: "Qual a pontuação da Escala de Coma de Glasgow para um paciente que abre os olhos à dor, emite sons incompreensíveis e apresenta flexão anormal (decorticação)?",
                options: ["6", "7", "8", "9"],
                correctAnswer: 1,
                justification: "Abertura ocular à dor (2) + Sons incompreensíveis (2) + Flexão anormal (3) = 7."
            },
            {
                question: "O hematoma subdural é causado geralmente por:",
                options: ["Ruptura arterial", "Ruptura de veias ponte", "Fratura linear", "Aneurisma"],
                correctAnswer: 1,
                justification: "O hematoma subdural ocorre geralmente por ruptura das veias ponte entre o córtex e a dura-máter."
            },
            {
                question: "Qual a conduta para um objeto encravado no crânio?",
                options: ["Remover imediatamente", "Remover e fazer curativo", "Não remover e estabilizar o objeto", "Cortar rente ao crânio"],
                correctAnswer: 2,
                justification: "Objetos encravados não devem ser removidos no pré-hospitalar; devem ser estabilizados para evitar lesão adicional."
            },

            // Trauma Raquimedular (TRM)
            {
                question: "Uma lesão medular no nível C4 resulta em:",
                options: ["Paraplegia", "Tetraplegia", "Hemiplegia", "Monoplegia"],
                correctAnswer: 1,
                justification: "Lesões cervicais altas (C4) afetam os quatro membros, resultando em tetraplegia."
            },
            {
                question: "Uma lesão medular no nível T6 resulta em:",
                options: ["Tetraplegia", "Paraplegia", "Perda apenas sensitiva", "Morte imediata"],
                correctAnswer: 1,
                justification: "Lesões torácicas (como T6) preservam os membros superiores, resultando em paraplegia."
            },

            // Dor Torácica e SCA
            {
                question: "A dor torácica Tipo A é definida como:",
                options: ["Definitivamente não anginosa", "Provavelmente anginosa", "Definitivamente anginosa", "Provavelmente não anginosa"],
                correctAnswer: 2,
                justification: "Tipo A é a dor definitivamente anginosa: retroesternal, precipitada por esforço, aliviada por repouso/nitrato."
            },
            {
                question: "Qual o tempo ideal para realização do ECG na dor torácica?",
                options: ["30 minutos", "10 minutos", "60 minutos", "Após exames de sangue"],
                correctAnswer: 1,
                justification: "O ECG deve ser realizado e interpretado em até 10 minutos da chegada do paciente."
            },
            {
                question: "O que significa o 'O' no mnemônico MONABICH para tratamento de IAM?",
                options: ["Opióide", "Oxigênio", "Omeprazol", "Ondansetrona"],
                correctAnswer: 1,
                justification: "O 'O' refere-se a Oxigênio (indicado se saturação < 90% ou congestão)."
            },
            {
                question: "A dor da Pericardite tem como característica:",
                options: ["Piora com esforço", "Melhora ao inclinar o tronco para frente", "É tipo rasgando", "Não tem relação com posição"],
                correctAnswer: 1,
                justification: "A dor da pericardite tipicamente melhora quando o paciente se senta e inclina o tronco para frente."
            },
            {
                question: "A dor da Dissecção de Aorta é descrita como:",
                options: ["Opressiva leve", "Súbita, intensa, tipo 'rasgando' ou 'facada', irradiando para o dorso", "Piora com a tosse", "Queimação"],
                correctAnswer: 1,
                justification: "A dissecção aórtica causa dor súbita, lancinante ('rasgando'), muitas vezes irradiando para as costas."
            },
            {
                question: "A Síndrome de Boerhaave é:",
                options: ["Infarto de VD", "Ruptura espontânea do esôfago", "Embolia pulmonar", "Pneumotórax espontâneo"],
                correctAnswer: 1,
                justification: "É a ruptura espontânea do esôfago, geralmente após vômitos vigorosos, causando dor torácica grave."
            },
            {
                question: "Na ausculta, o atrito pericárdico é sinal de:",
                options: ["Pneumonia", "IAM", "Pericardite", "Pneumotórax"],
                correctAnswer: 2,
                justification: "O atrito pericárdico é o sinal físico clássico da pericardite aguda."
            },
            {
                question: "O Sinal de Kussmaul (turgência jugular na inspiração) pode indicar:",
                options: ["Tamponamento cardíaco", "Infarto anterior", "Pneumonia", "AVC"],
                correctAnswer: 0,
                justification: "O sinal de Kussmaul e o pulso paradoxal são sinais sugestivos de tamponamento cardíaco."
            },
            {
                question: "Qual marcador de necrose miocárdica é o mais específico e sensível?",
                options: ["CK-MB", "Mioglobina", "Troponina", "LDH"],
                correctAnswer: 2,
                justification: "As Troponinas são os marcadores padrão-ouro para diagnóstico de lesão miocárdica."
            },
            {
                question: "Qual a conduta imediata na suspeita de IAM com supra de ST?",
                options: ["Apenas observação", "Reperfusão (Trombólise ou Angioplastia/ICP)", "Antibióticos", "Alta para casa"],
                correctAnswer: 1,
                justification: "O objetivo principal é a reperfusão imediata da artéria ocluída, seja por medicamentos (fibrinolíticos) ou cateterismo (ICP)."
            }
        ];


        const quizContainer = document.getElementById('quiz-container');
        const resultContainer = document.getElementById('result-container');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressIndicator = document.getElementById('progress-indicator');
        const feedbackArea = document.getElementById('feedback-area');
        const justificationText = document.getElementById('justification-text');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');

        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let score = 0;

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers.fill(null);
            resultContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            loadQuestion(currentQuestionIndex);
        }

        function loadQuestion(index) {
            feedbackArea.classList.add('hidden');
            const question = questions[index];
            questionText.textContent = question.question;
            progressIndicator.textContent = `Questão ${index + 1} de ${questions.length}`;
            optionsContainer.innerHTML = '';

            question.options.forEach((option, i) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('option-button', 'w-full', 'text-left', 'p-4', 'rounded-lg', 'border', 'border-gray-300', 'bg-white', 'hover:bg-gray-50', 'focus:outline-none', 'focus:ring-2', 'focus:ring-blue-400');
                button.dataset.index = i;
                button.onclick = () => selectAnswer(i);
                optionsContainer.appendChild(button);
            });

            updateNavigation();
            
            if (userAnswers[index] !== null) {
                showPreviousAnswer(index);
            }
        }
        
        function selectAnswer(selectedIndex) {
            if (userAnswers[currentQuestionIndex] !== null) return; // Prevent re-answering

            const question = questions[currentQuestionIndex];
            const correct = selectedIndex === question.correctAnswer;
            
            userAnswers[currentQuestionIndex] = {
                selected: selectedIndex,
                correct: correct
            };

            if (correct) {
                score++;
            }

            const buttons = optionsContainer.querySelectorAll('.option-button');
            buttons.forEach(button => {
                button.disabled = true;
                const buttonIndex = parseInt(button.dataset.index);

                if (buttonIndex === question.correctAnswer) {
                    button.classList.add('correct-answer');
                } else if (buttonIndex === selectedIndex && !correct) {
                    button.classList.add('wrong-answer');
                }
            });

            justificationText.textContent = question.justification;
            feedbackArea.classList.remove('hidden');
            nextBtn.disabled = false;
        }

        function showPreviousAnswer(index) {
            const question = questions[index];
            const answer = userAnswers[index];
            
            const buttons = optionsContainer.querySelectorAll('.option-button');
            buttons.forEach(button => {
                button.disabled = true;
                const buttonIndex = parseInt(button.dataset.index);

                if (buttonIndex === question.correctAnswer) {
                    button.classList.add('correct-answer');
                } else if (buttonIndex === answer.selected) {
                    button.classList.add('selected-wrong');
                }
            });

            justificationText.textContent = question.justification;
            feedbackArea.classList.remove('hidden');
            nextBtn.disabled = false;
        }


        function updateNavigation() {
            prevBtn.disabled = currentQuestionIndex === 0;
            nextBtn.disabled = userAnswers[currentQuestionIndex] === null;

            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.textContent = 'Finalizar';
            } else {
                nextBtn.textContent = 'Avançar';
            }
        }

        function handleNext() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion(currentQuestionIndex);
            } else {
                showResults();
            }
        }

        function handlePrev() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion(currentQuestionIndex);
            }
        }

        function showResults() {
            quizContainer.classList.add('hidden');
            resultContainer.classList.remove('hidden');

            const percentage = Math.round((score / questions.length) * 100);
            document.getElementById('final-score').textContent = `${percentage}%`;
            document.getElementById('score-details').textContent = `Você acertou ${score} de ${questions.length} questões.`;
        }

        nextBtn.addEventListener('click', handleNext);
        prevBtn.addEventListener('click', handlePrev);
        restartBtn.addEventListener('click', startQuiz);

        // Initial load
        startQuiz();

    </script>
</body>
</html>
